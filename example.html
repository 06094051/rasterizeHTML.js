<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rasterizeHTML.js example</title>
    <script type="text/javascript" src="lib/htmlparser.js"></script> <!-- Only needed for Chrome & Safari -->
    <script type="text/javascript" src="lib/cssParser.js"></script>
    <script type="text/javascript" src="lib/URI.js"></script>
    <script type="text/javascript" src="rasterizeHTML.js"></script>
</head>
<body>
    <canvas id="canvas" style="border:2px solid black;" width="550" height="200"></canvas>
    <div>
        <textarea id="input" cols="80" rows="10" style="width: 550px;">You can type HTML into this &lt;span style='color: green'&gt;canvas&lt;/span&gt;.
&lt;div class="tigerbg"&gt;
A div with background-image
&lt;/div&gt;
An img: &lt;img src='ghostscript_tiger.png' alt='Tiger'/&gt;
&lt;style type="text/css"&gt;
body {
    font-size: 16px;
}
.tigerbg {
    background: url(ghostscript_tiger.png) no-repeat top right #eef;
    height: 50px;
}
&lt;/style&gt;
</textarea>
    </div>
    <script type="text/javascript">
        var input = document.getElementById("input");

        function drawCanvas(text) {
            var doc, svg, canvas;

            doc = document.implementation.createHTMLDocument("");
            doc.body.innerHTML = text;

            rasterizeHTML.loadAndInlineImages(doc, function () {
                rasterizeHTML.loadAndInlineCSSReferences(doc, function () {
                    canvas = document.getElementById("canvas");

                    svg = rasterizeHTML.getSvgForDocument(doc, canvas.width, canvas.height);
                    rasterizeHTML.drawSvgToCanvas(svg, canvas);
                });
            });
        }

        input.onkeyup = function () {
            var canvas = document.getElementById("canvas");

            canvas.getContext("2d").clearRect(0, 0, canvas.width, canvas.height);

            drawCanvas(this.value);
        };

        drawCanvas(input.value);
    </script>
</body>
</html>
