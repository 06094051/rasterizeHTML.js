<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>rasterizeHTML.js example</title>
    <script type="text/javascript" src="lib/htmlparser.js"></script> <!-- Only needed for Chrome & Safari -->
    <script type="text/javascript" src="lib/cssParser.js"></script>
    <script type="text/javascript" src="rasterizeHTML.js"></script>
</head>
<body>
    <canvas id="canvas" style="border:2px solid black;" width="100" height="100"></canvas>
    <div>
        <textarea id="input" cols="80" rows="8">&lt;div class="tigerbg"&gt;You can type HTML into this &lt;span style='color: green'&gt;canvas&lt;/span&gt;.
&lt;img src='ghostscript_tiger.png' alt='Tiger'/&gt;&lt;/div&gt;
&lt;style type="text/css"&gt;
.tigerbg {
    background: url(ghostscript_tiger.png) no-repeat top right;
}
&lt;/style&gt;
</textarea>
    </div>
    <script type="text/javascript">
        var input = document.getElementById("input");

        function drawCanvas(text) {
            var doc, svg, canvas;

            doc = document.implementation.createHTMLDocument("");
            doc.body.innerHTML = '<div style="font-size: 16px;">' + text + '</div>';

            rasterizeHTML.loadAndInlineImages(doc, function () {
                rasterizeHTML.loadAndInlineCSSReferences(doc, function () {
                    canvas = document.getElementById("canvas");

                    svg = rasterizeHTML.getSvgForDocument(doc);
                    rasterizeHTML.drawSvgToCanvas(svg, canvas);
                });
            });
        }

        input.onkeyup = function () {
            var canvas = document.getElementById("canvas");

            canvas.getContext("2d").clearRect(0, 0, 100, 100);

            drawCanvas(this.value);
        };

        drawCanvas(input.value);
    </script>
</body>
</html>
