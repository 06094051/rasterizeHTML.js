<!DOCTYPE html>
<html>
<head>
    <title>Test page with full resource includes</title>
    <script type="text/javascript" src="../lib/cssParser.js"></script>
    <script type="text/javascript" src="../lib/URI.js"></script>
    <script type="text/javascript" src="../rasterizeHTML.js"></script>
    <script type="text/javascript" src="../lib/htmlparser.js"></script> <!-- Only needed for Chrome & Safari -->
</head>
<body>
    <div>
        <canvas id="documentCanvas" width="400" height="200"></canvas>
        <script type="text/javascript">
            var documentCanvas = document.getElementById("documentCanvas"),
                documentRequest = new window.XMLHttpRequest();

            documentRequest.onreadystatechange = function () {
                if (documentRequest.readyState == 4) {
                    rasterizeHTML.drawDocument(documentRequest.responseXML, documentCanvas);
                }
            };
            documentRequest.open('GET', "fixtures/test.html", true);
            // Seems to not work on Safari (https://developer.mozilla.org/en/HTML_in_XMLHttpRequest)
            documentRequest.responseType = "document";
            documentRequest.overrideMimeType("text/html");
            documentRequest.send(null);
        </script>
    </div>

    <div>
        <canvas id="htmlCanvas" width="400" height="200"></canvas>
        <script type="text/javascript">
            var htmlCanvas = document.getElementById("htmlCanvas"),
                htmlRequest = new window.XMLHttpRequest();

            htmlRequest.onreadystatechange = function () {
                if (htmlRequest.readyState == 4) {
                    rasterizeHTML.drawHTML(htmlRequest.responseText, htmlCanvas, "fixtures/");
                }
            };
            htmlRequest.open('GET', "fixtures/test.html", true);
            htmlRequest.overrideMimeType("text/html");
            htmlRequest.send(null);
        </script>
    </div>
</body>
</html>
